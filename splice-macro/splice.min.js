Macro.add("splice",{tags:["passage","text","var"],handler:function(){let a="";for(const b of this.payload){if(!("passage"==b.name))"var"==b.name&&(a+=State.getVar(b.args[0]));else if(b.args[0]){const c=Story.get(b.args[0]);c&&(a+=c.processText())}a+=b.contents.replace(/\\$\s+/gm,"")}$(this.output).wiki(a)}});